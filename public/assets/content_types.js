var CodeMirrorConfig=window.CodeMirrorConfig||{},CodeMirror=function(){function g(i,h){for(var j in h){i.hasOwnProperty(j)||(i[j]=h[j])}}function f(i,h){for(var j=0;j<i.length;j++){h(i[j])}}function d(h){return document.createElementNS&&document.documentElement.namespaceURI!==null?document.createElementNS("http://www.w3.org/1999/xhtml",h):document.createElement(h)}function e(j,i){var m=d("div"),l=d("div");m.style.position="absolute";m.style.height="100%";if(m.style.setExpression){try{m.style.setExpression("height","this.previousSibling.offsetHeight + 'px'")}catch(k){}}m.style.top="0px";m.style.left="0px";m.style.overflow="hidden";j.appendChild(m);l.className="CodeMirror-line-numbers";m.appendChild(l);l.innerHTML="<div>"+i+"</div>";return m}function c(i){if(typeof i.parserfile=="string"){i.parserfile=[i.parserfile]}if(typeof i.basefiles=="string"){i.basefiles=[i.basefiles]}if(typeof i.stylesheet=="string"){i.stylesheet=[i.stylesheet]}var h=['<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>'];h.push('<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>');var j=i.noScriptCaching?"?nocache="+(new Date).getTime().toString(16):"";f(i.stylesheet,function(k){h.push('<link rel="stylesheet" type="text/css" href="'+k+j+'"/>')});f(i.basefiles.concat(i.parserfile),function(k){/^https?:/.test(k)||(k=i.path+k);h.push('<script type="text/javascript" src="'+k+j+'"><\/script>')});h.push('</head><body style="border-width: 0;" class="editbox" spellcheck="'+(i.disableSpellcheck?"false":"true")+'"></body></html>');return h.join("")}function b(j,i){this.options=i=i||{};g(i,CodeMirrorConfig);if(i.dumbTabs){i.tabMode="spaces"}else{if(i.normalTab){i.tabMode="default"}}if(i.cursorActivity){i.onCursorActivity=i.cursorActivity}var m=this.frame=d("iframe");if(i.iframeClass){m.className=i.iframeClass}m.frameBorder=0;m.style.border="0";m.style.width="100%";m.style.height="100%";m.style.display="block";var l=this.wrapping=d("div");l.style.position="relative";l.className="CodeMirror-wrapping";l.style.width=i.width;l.style.height=i.height=="dynamic"?i.minHeight+"px":i.height;var k=this.textareaHack=d("textarea");l.appendChild(k);k.style.position="absolute";k.style.left="-10000px";k.style.width="10px";k.tabIndex=100000;m.CodeMirror=this;if(i.domain&&a){this.html=c(i);m.src="javascript:(function(){document.open();"+(i.domain?'document.domain="'+i.domain+'";':"")+"document.write(window.frameElement.CodeMirror.html);document.close();})()"}else{m.src="javascript:;"}j.appendChild?j.appendChild(l):j(l);l.appendChild(m);if(i.lineNumbers){this.lineNumbers=e(l,i.firstLineNumber)}this.win=m.contentWindow;if(!i.domain||!a){this.win.document.open();this.win.document.write(c(i));this.win.document.close()}}g(CodeMirrorConfig,{stylesheet:[],path:"",parserfile:[],basefiles:["util.js","stringstream.js","select.js","undo.js","editor.js","tokenize.js"],iframeClass:null,passDelay:200,passTime:50,lineNumberDelay:200,lineNumberTime:50,continuousScanning:false,saveFunction:null,onLoad:null,onChange:null,undoDepth:50,undoDelay:800,disableSpellcheck:true,textWrapping:true,readOnly:false,width:"",height:"300px",minHeight:100,autoMatchParens:false,markParen:null,unmarkParen:null,parserConfig:null,tabMode:"indent",enterMode:"indent",electricChars:true,reindentOnLoad:false,activeTokens:null,onCursorActivity:null,lineNumbers:false,firstLineNumber:1,onLineNumberClick:null,indentUnit:2,domain:null,noScriptCaching:false,incrementalLoading:false});var a=document.selection&&window.ActiveXObject&&/MSIE/.test(navigator.userAgent);b.prototype={init:function(){this.options.initCallback&&this.options.initCallback(this);this.options.onLoad&&this.options.onLoad(this);this.options.lineNumbers&&this.activateLineNumbers();this.options.reindentOnLoad&&this.reindent();this.options.height=="dynamic"&&this.setDynamicHeight()},getCode:function(){return this.editor.getCode()},setCode:function(h){this.editor.importCode(h)},selection:function(){this.focusIfIE();return this.editor.selectedText()},reindent:function(){this.editor.reindent()},reindentSelection:function(){this.focusIfIE();this.editor.reindentSelection(null)},focusIfIE:function(){this.win.select.ie_selection&&document.activeElement!=this.frame&&this.focus()},focus:function(){this.win.focus();this.editor.selectionSnapshot&&this.win.select.setBookmark(this.win.document.body,this.editor.selectionSnapshot)},replaceSelection:function(h){this.focus();this.editor.replaceSelection(h);return true},replaceChars:function(i,h,j){this.editor.replaceChars(i,h,j)},getSearchCursor:function(i,h,j){return this.editor.getSearchCursor(i,h,j)},undo:function(){this.editor.history.undo()},redo:function(){this.editor.history.redo()},historySize:function(){return this.editor.history.historySize()},clearHistory:function(){this.editor.history.clear()},grabKeys:function(i,h){this.editor.grabKeys(i,h)},ungrabKeys:function(){this.editor.ungrabKeys()},setParser:function(i,h){this.editor.setParser(i,h)},setSpellcheck:function(h){this.win.document.body.spellcheck=h},setStylesheet:function(j){if(typeof j==="string"){j=[j]}for(var i={},q={},o=this.win.document.getElementsByTagName("link"),k=0,m;m=o[k];k++){if(m.rel.indexOf("stylesheet")!==-1){for(var l=0;l<j.length;l++){var p=j[l];if(m.href.substring(m.href.length-p.length)===p){i[m.href]=true;q[p]=true}}}}for(k=0;m=o[k];k++){if(m.rel.indexOf("stylesheet")!==-1){m.disabled=!(m.href in i)}}for(l=0;l<j.length;l++){p=j[l];if(!(p in q)){m=this.win.document.createElement("link");m.rel="stylesheet";m.type="text/css";m.href=p;this.win.document.getElementsByTagName("head")[0].appendChild(m)}}},setTextWrapping:function(h){if(h!=this.options.textWrapping){this.win.document.body.style.whiteSpace=h?"":"nowrap";this.options.textWrapping=h;if(this.lineNumbers){this.setLineNumbers(false);this.setLineNumbers(true)}}},setIndentUnit:function(h){this.win.indentUnit=h},setUndoDepth:function(h){this.editor.history.maxDepth=h},setTabMode:function(h){this.options.tabMode=h},setEnterMode:function(h){this.options.enterMode=h},setLineNumbers:function(h){if(h&&!this.lineNumbers){this.lineNumbers=e(this.wrapping,this.options.firstLineNumber);this.activateLineNumbers()}else{if(!h&&this.lineNumbers){this.wrapping.removeChild(this.lineNumbers);this.wrapping.style.paddingLeft="";this.lineNumbers=null}}},cursorPosition:function(h){this.focusIfIE();return this.editor.cursorPosition(h)},firstLine:function(){return this.editor.firstLine()},lastLine:function(){return this.editor.lastLine()},nextLine:function(h){return this.editor.nextLine(h)},prevLine:function(h){return this.editor.prevLine(h)},lineContent:function(h){return this.editor.lineContent(h)},setLineContent:function(i,h){this.editor.setLineContent(i,h)},removeLine:function(h){this.editor.removeLine(h)},insertIntoLine:function(i,h,j){this.editor.insertIntoLine(i,h,j)},selectLines:function(i,h,k,j){this.win.focus();this.editor.selectLines(i,h,k,j)},nthLine:function(i){for(var h=this.firstLine();i>1&&h!==false;i--){h=this.nextLine(h)}return h},lineNumber:function(i){for(var h=0;i!==false;){h++;i=this.prevLine(i)}return h},jumpToLine:function(h){if(typeof h=="number"){h=this.nthLine(h)}this.selectLines(h,0);this.win.focus()},currentLine:function(){return this.lineNumber(this.cursorLine())},cursorLine:function(){return this.cursorPosition().line},cursorCoords:function(h){return this.editor.cursorCoords(h)},activateLineNumbers:function(){function D(){if(u.offsetWidth!=0){for(var i=u;i.parentNode;i=i.parentNode){}if(!r.parentNode||i!=document||!t.Editor){try{A()}catch(h){}clearInterval(C)}else{if(r.offsetWidth!=w){w=r.offsetWidth;u.parentNode.style.paddingLeft=w+"px"}}}}function B(){r.scrollTop=k.scrollTop||m.documentElement.scrollTop||0}function x(j){var i=o.firstChild.offsetHeight;if(i!=0){i=Math.ceil((50+Math.max(k.offsetHeight,Math.max(u.offsetHeight,k.scrollHeight||0)))/i);for(var l=o.childNodes.length;l<=i;l++){var h=d("div");h.appendChild(document.createTextNode(j?String(l+p.options.firstLineNumber):"\u00a0"));o.appendChild(h)}}}function v(){function i(){x(true);B()}p.updateNumbers=i;var h=t.addEventHandler(t,"scroll",B,true),j=t.addEventHandler(t,"resize",i,true);A=function(){h();j();if(p.updateNumbers==i){p.updateNumbers=null}};i()}function s(){function y(K,I){h||(h=o.appendChild(d("div")));G&&G(h,I,K);M.push(h);M.push(K);j=h.offsetHeight+h.offsetTop;h=h.nextSibling}function q(){for(var I=0;I<M.length;I+=2){M[I].innerHTML=M[I+1]}M=[]}function l(){if(!(!o.parentNode||o.parentNode!=p.lineNumbers)){for(var K=(new Date).getTime()+p.options.lineNumberTime;n;){for(y(i++,n.previousSibling);n&&!t.isBR(n);n=n.nextSibling){for(var I=n.offsetTop+n.offsetHeight;o.offsetHeight&&I-3>j;){y("&nbsp;")}}if(n){n=n.nextSibling}if((new Date).getTime()>K){q();J=setTimeout(l,p.options.lineNumberDelay);return}}for(;h;){y(i++)}q();B()}}function H(I){B();x(I);n=k.firstChild;h=o.firstChild;j=0;i=p.options.firstLineNumber;l()}function F(){J&&clearTimeout(J);if(p.editor.allClean()){H()}else{J=setTimeout(F,200)}}var n,h,i,j,M=[],G=p.options.styleNumbers;H(true);var J=null;p.updateNumbers=F;var E=t.addEventHandler(t,"scroll",B,true),z=t.addEventHandler(t,"resize",F,true);A=function(){J&&clearTimeout(J);if(p.updateNumbers==F){p.updateNumbers=null}E();z()}}var u=this.frame,t=u.contentWindow,m=t.document,k=m.body,r=this.lineNumbers,o=r.firstChild,p=this,w=null;r.onclick=function(i){var h=p.options.onLineNumberClick;if(h){i=(i||window.event).target||(i||window.event).srcElement;var j=i==r?NaN:Number(i.innerHTML);isNaN(j)||h(j,i)}};var A=function(){};D();var C=setInterval(D,500);(this.options.textWrapping||this.options.styleNumbers?s:v)()},setDynamicHeight:function(){function j(){for(var r=0,n=k.lastChild,h;n&&o.isBR(n);){n.hackBR||r++;n=n.previousSibling}if(n){m=n.offsetHeight;h=n.offsetTop+(1+r)*m}else{if(m){h=r*m}}if(h){i.wrapping.style.height=Math.max(p+h,i.options.minHeight)+"px"}}var i=this,q=i.options.onCursorActivity,o=i.win,k=o.document.body,m=null,l=null,p=2*i.frame.offsetTop;k.style.overflowY="hidden";o.document.documentElement.style.overflowY="hidden";this.frame.scrolling="no";setTimeout(j,300);i.options.onCursorActivity=function(h){q&&q(h);clearTimeout(l);l=setTimeout(j,100)}}};b.InvalidLineHandle={toString:function(){return"CodeMirror.InvalidLineHandle"}};b.replace=function(h){if(typeof h=="string"){h=document.getElementById(h)}return function(i){h.parentNode.replaceChild(i,h)}};b.fromTextArea=function(j,i){function n(){j.value=l.getCode()}if(typeof j=="string"){j=document.getElementById(j)}i=i||{};if(j.style.width&&i.width==null){i.width=j.style.width}if(j.style.height&&i.height==null){i.height=j.style.height}if(i.content==null){i.content=j.value}if(j.form){typeof j.form.addEventListener=="function"?j.form.addEventListener("submit",n,false):j.form.attachEvent("onsubmit",n);var m=j.form.submit,k=function(){n();j.form.submit=m;j.form.submit();j.form.submit=k};j.form.submit=k}j.style.display="none";var l=new b(function(h){j.nextSibling?j.parentNode.insertBefore(h,j.nextSibling):j.parentNode.appendChild(h)},i);l.save=n;l.toTextArea=function(){n();j.parentNode.removeChild(l.wrapping);j.style.display="";if(j.form){j.form.submit=m;typeof j.form.removeEventListener=="function"?j.form.removeEventListener("submit",n,false):j.form.detachEvent("onsubmit",n)}};return l};b.isProbablySupported=function(){var h;return window.opera?Number(window.opera.version())>=9.52:/Apple Computer, Inc/.test(navigator.vendor)&&(h=navigator.userAgent.match(/Version\/(\d+(?:\.\d+)?)\./))?Number(h[1])>=3:document.selection&&window.ActiveXObject&&(h=navigator.userAgent.match(/MSIE (\d+(?:\.\d*)?)\b/))?Number(h[1])>=6:(h=navigator.userAgent.match(/gecko\/(\d{8})/i))?Number(h[1])>=20050901:(h=navigator.userAgent.match(/AppleWebKit\/(\d+)/))?Number(h[1])>=525:null};return b}();$(document).ready(function(){$("#content_type_name").keypress(function(){var c=$(this);var b=$("#content_type_slug");if(!b.hasClass("filled")){setTimeout(function(){b.val(makeSlug(c.val()))},50)}});$("#content_type_slug").keypress(function(){$(this).addClass("filled")});$("#content_type_order_by").change(function(){if($(this).val()!="_position_in_list"){$("#content_type_order_direction_input").show()}else{$("#content_type_order_direction_input").hide()}});var a=$(".formtastic.content_type fieldset").last();$.subscribe("toggle.content_type_api_enabled.checked",function(b,c){$("#content_type_api_accounts_input").show();a.trigger("refresh")},[]);$.subscribe("toggle.content_type_api_enabled.unchecked",function(b,c){$("#content_type_api_accounts_input").hide();a.trigger("refresh")},[])});